-- 4strxl spamrz | White hub + light purple UI
-- Spam Hub + Jail After Death/Respawn only on last clicked target in current session
-- Commands execute in order
-- Draggable hub fixed + Minimize button with animation

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

repeat task.wait() until LocalPlayer and LocalPlayer:FindFirstChild("PlayerGui")

-- CONFIG
local TITLE_TEXT = "4strxl spamrz"
local COMMANDS = {"rocket","balloon","inverse","tiny","morph","jumpscare"}

-- COLORS
local PURPLE = Color3.fromRGB(190,160,255)
local PURPLE_DARK = Color3.fromRGB(160,130,220)
local BG = Color3.fromRGB(255,255,255)
local BTN = Color3.fromRGB(190,160,255)

-- NOTIFY
local function notify(t,d)
    pcall(function()
        StarterGui:SetCore("SendNotification",{
            Title=t,
            Text=d,
            Duration=3
        })
    end)
end

-- FIND REMOTE
local Remote
task.spawn(function()
    local start = os.clock()
    repeat
        local pkg = ReplicatedStorage:FindFirstChild("Packages")
        if pkg and pkg:FindFirstChild("Net") then
            Remote = pkg.Net:FindFirstChild("RE/AdminPanelService/ExecuteCommand")
        end
        task.wait(0.2)
    until Remote or os.clock()-start > 8
end)

-- CLEAN OLD GUI
pcall(function()
    local old = LocalPlayer.PlayerGui:FindFirstChild("4strxl_spamz_gui")
    if old then old:Destroy() end
end)

-- GUI ROOT
local gui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
gui.Name = "4strxl_spamz_gui"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromOffset(300,380)
main.Position = UDim2.new(1,-310,0.5,-190) -- Spawn on right-middle
main.BackgroundColor3 = BG
main.BorderSizePixel = 0
Instance.new("UICorner",main).CornerRadius = UDim.new(0,14)

local stroke = Instance.new("UIStroke",main)
stroke.Color = PURPLE
stroke.Transparency = 0.25

-- TOP BAR
local top = Instance.new("Frame",main)
top.Size = UDim2.new(1,0,0,38)
top.BackgroundColor3 = PURPLE
top.BorderSizePixel = 0
Instance.new("UICorner",top).CornerRadius = UDim.new(0,14)

local title = Instance.new("TextLabel",top)
title.Size = UDim2.new(1,-120,1,0)
title.Position = UDim2.fromOffset(12,0)
title.BackgroundTransparency = 1
title.Text = TITLE_TEXT
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.TextColor3 = Color3.fromRGB(245,245,245)

local refresh = Instance.new("TextButton",top)
refresh.Size = UDim2.fromOffset(78,26)
refresh.Position = UDim2.new(1,-84,0,6)
refresh.Text = "Refresh"
refresh.Font = Enum.Font.Gotham
refresh.TextSize = 14
refresh.TextColor3 = Color3.fromRGB(255,255,255)
refresh.BackgroundColor3 = PURPLE_DARK
refresh.BorderSizePixel = 0
Instance.new("UICorner",refresh).CornerRadius = UDim.new(0,8)

-- MINIMIZE BUTTON
local minimize = Instance.new("TextButton",top)
minimize.Size = UDim2.fromOffset(26,26)
minimize.Position = UDim2.new(1,-38,0,6)
minimize.Text = "-"
minimize.Font = Enum.Font.GothamBold
minimize.TextSize = 18
minimize.TextColor3 = Color3.fromRGB(255,255,255)
minimize.BackgroundColor3 = PURPLE_DARK
Instance.new("UICorner",minimize).CornerRadius = UDim.new(0,6)

local minimized = false
local fullSize = main.Size
local fullCanvas = UDim2.new(1,0,1,0)
minimize.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        local tween = TweenService:Create(main, TweenInfo.new(0.3), {Size=UDim2.new(0,100,0,38)})
        tween:Play()
    else
        local tween = TweenService:Create(main, TweenInfo.new(0.3), {Size=fullSize})
        tween:Play()
    end
end)

-- CONTENT
local holder = Instance.new("Frame",main)
holder.Position = UDim2.fromOffset(8,46)
holder.Size = UDim2.new(1,-16,1,-54)
holder.BackgroundTransparency = 1

local list = Instance.new("ScrollingFrame",holder)
list.Size = UDim2.fromScale(1,1)
list.CanvasSize = UDim2.new()
list.ScrollBarThickness = 6
list.BackgroundTransparency = 1
list.BorderSizePixel = 0

local layout = Instance.new("UIListLayout",list)
layout.Padding = UDim.new(0,6)

-- DRAG FIXED
do
    local dragging = false
    local dragInput, startPos, startMousePos

    local function update(input)
        local delta = input.Position - startMousePos
        main.Position = UDim2.new(0, startPos.X.Offset + delta.X, 0, startPos.Y.Offset + delta.Y)
    end

    top.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            startMousePos = input.Position
            startPos = main.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    top.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

-- SPAM FUNCTION
local lastTarget

local function spamPlayer(plr)
    if not Remote then notify(TITLE_TEXT,"Remote not ready") return end
    lastTarget = plr

    task.spawn(function()
        for _,cmd in ipairs(COMMANDS) do
            if Remote and plr then
                pcall(function() Remote:FireServer(plr,cmd) end)
            end
        end
        notify("Sent","Spammed @"..plr.Name.." in order")
    end)

    local function trackRespawn(char)
        local humanoid = char:WaitForChild("Humanoid",5)
        if not humanoid then return end

        humanoid.Died:Once(function()
            plr.CharacterAdded:Wait()
            local newChar = plr.Character
            if newChar and plr == lastTarget and Players:FindFirstChild(plr.Name) then
                task.wait(0.1)
                if Remote then
                    pcall(function() Remote:FireServer(plr,"jail") end)
                    task.wait(1.2)
                    pcall(function() Remote:FireServer(plr,"ragdoll") end)
                    notify(TITLE_TEXT,"@"..plr.Name.." jailed & ragdolled")
                end
                lastTarget = nil
            end
        end)
    end

    if plr.Character then trackRespawn(plr.Character) end
    plr.CharacterAdded:Connect(trackRespawn)

    plr.AncestryChanged:Connect(function(_,parent)
        if not parent and lastTarget == plr then lastTarget=nil end
    end)
end

-- UI HELPERS
local function section(text)
    local l=Instance.new("TextLabel")
    l.Size=UDim2.new(1,-6,0,26)
    l.BackgroundTransparency=1
    l.Text=text
    l.Font=Enum.Font.GothamBold
    l.TextSize=13
    l.TextXAlignment=Enum.TextXAlignment.Left
    l.TextColor3=Color3.fromRGB(120,120,120)
    return l
end

local function spamButton(plr)
    local b=Instance.new("TextButton")
    b.Size=UDim2.new(1,-6,0,40)
    b.Text="  @"..plr.Name
    b.TextXAlignment=Enum.TextXAlignment.Left
    b.Font=Enum.Font.Gotham
    b.TextSize=16
    b.TextColor3=Color3.fromRGB(20,20,20)
    b.BackgroundColor3=BTN
    b.BorderSizePixel=0
    Instance.new("UICorner",b).CornerRadius = UDim.new(0,8)

    b.MouseEnter:Connect(function() b.BackgroundColor3=PURPLE_DARK end)
    b.MouseLeave:Connect(function() b.BackgroundColor3=BTN end)
    b.Activated:Connect(function() spamPlayer(plr) end)
    return b
end

-- REFRESH LIST
local function refreshList()
    for _,v in ipairs(list:GetChildren()) do
        if v:IsA("TextButton") or v:IsA("TextLabel") then v:Destroy() end
    end

    section("spam commands").Parent=list
    for _,p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then spamButton(p).Parent=list end
    end

    task.wait()
    list.CanvasSize = UDim2.fromOffset(0,layout.AbsoluteContentSize.Y+10)
end

refresh.MouseButton1Click:Connect(refreshList)
Players.PlayerAdded:Connect(refreshList)
Players.PlayerRemoving:Connect(refreshList)

refreshList()
notify(TITLE_TEXT,"Hub loaded successfully")
